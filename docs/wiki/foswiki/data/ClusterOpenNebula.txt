%META:TOPICINFO{author="roman" comment="reprev" date="1627890919" format="1.1" reprev="10" version="10"}%
---+!! Кластер для офисного облака на OpenNebula

%TOC%

---++ Список Host-серверов в кластере %BASETOPIC%

%SEARCH{
"lc(DeviceType)='kvmhost' and VirtualCluster='%BASETOPIC%'"
topic="Server*"
type="query"
nosearch="on"
header="|*Name*|*CPU*|*Memory*|*IP*|*Description*|*Rack*|"
format="| [[$topic][$formfield(DnsName)]] | $formfield(DeviceCPU) | $formfield(DeviceMemory) | $formfield(DeviceIP) | $formfield(Description) | $formfield(Rack) |"
}%

---++ Виртуальные сервера в облаке.

%SEARCH{
"lc(DeviceType)~'virtual*' and VirtualCluster!=''"
topic="Server*"
type="query"
nosearch="on"
header="|*ID*|*Name*|*Virtualization*|*CPU Count*|*Memory*|*OS*|*IP*|*Description*|"
format="| $formfield(VmID) | [[$web.$topic][$formfield(DnsName)]] | $formfield(Device Type) | $formfield(Device CPU) | $formfield(Device Memory) | $formfield(Device OS) | $formfield(Device IP) | $formfield(Description) |"
}%

---++ Добавить

%INCLUDE{IncludeAddVServerCluster}%

%INCLUDE{IncludeAddKvmHost}%

---++ Работа

%COMMENT{type="workflow"}%

-- Main.RomanDmitriev - 2020/10/14

%META:FORM{name="FormSimple"}%
%META:FIELD{name="Name" title="Name" value="ClusterOpenNebula"}%
%META:FIELD{name="Place" title="Place" value=""}%
%META:FIELD{name="Rack" title="Rack" value=""}%
%META:FIELD{name="Unit" title="Unit" value=""}%
%META:FIELD{name="Description" title="Description" value="Офисное облако"}%
%META:PREFERENCE{name="DENYTOPICVIEW" title="DENYTOPICVIEW" type="Set" value="WikiGuest"}%
%META:PREFERENCE{name="DENYTOPICCHANGE" title="DENYTOPICCHANGE" type="Set" value="WikiGuest"}%
%META:PREFERENCE{name="PERMSET_VIEW" title="PERMSET_VIEW" type="Local" value="registeredusers"}%
%META:PREFERENCE{name="PERMSET_CHANGE" title="PERMSET_CHANGE" type="Local" value="registeredusers"}%
